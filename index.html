<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–æ—Ç–∞</title>
    <style>
        :root {
            --bg-color: var(--tg-theme-bg-color, #1a1a1a);
            --text-color: var(--tg-theme-text-color, #ffffff);
            --hint-color: var(--tg-theme-hint-color, #888888);
            --button-color: var(--tg-theme-button-color, #50a8eb);
            --secondary-bg: var(--tg-theme-secondary-bg-color, #2c2c2c);
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, system-ui, sans-serif;
            padding: 15px;
            margin: 0;
        }
        .section {
            background: var(--secondary-bg);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.05);
        }
        h3 { margin: 0 0 15px 0; font-size: 14px; text-transform: uppercase; color: var(--button-color); letter-spacing: 0.5px; }
        .field { margin-bottom: 15px; }
        .field:last-child { margin-bottom: 0; }
        label { display: block; font-size: 13px; margin-bottom: 8px; color: var(--hint-color); }
        input {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.2);
            color: #fff;
            font-size: 16px;
            box-sizing: border-box;
            outline: none;
        }
        input:focus { border-color: var(--button-color); }
        .current-tag {
            float: right;
            font-size: 11px;
            background: var(--button-color);
            color: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            opacity: 0.8;
        }
    </style>
</head>
<body>

    <div class="section">
        <h3>‚è± –ß–∞—Å—Ç–æ—Ç–∞ –∏ –¢–∞–π–º–∏–Ω–≥–∏</h3>
        <div class="field">
            <label>–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π (–º–∏–Ω) <span id="tag_check" class="current-tag"></span></label>
            <input type="number" id="check_interval" placeholder="–ù–∞–ø—Ä: 15">
        </div>
        <div class="field">
            <label>–ü–∞—É–∑–∞ –º–µ–∂–¥—É –ø–æ—Å—Ç–∞–º–∏ (—Å–µ–∫) <span id="tag_pause" class="current-tag"></span></label>
            <input type="number" id="post_interval" placeholder="–ù–∞–ø—Ä: 10">
        </div>
    </div>

    <div class="section">
        <h3>üì¶ –ö–æ–Ω—Ç–µ–Ω—Ç –∏ –§–∏–ª—å—Ç—Ä—ã</h3>
        <div class="field">
            <label>–ö–æ–ª-–≤–æ –ø–æ—Å—Ç–æ–≤ –∑–∞ —Ä–∞–∑ <span id="tag_posts" class="current-tag"></span></label>
            <input type="number" id="posts_per_check" placeholder="–ù–∞–ø—Ä: 3">
        </div>
        <div class="field">
            <label>–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å (—á–∞—Å–æ–≤) <span id="tag_age" class="current-tag"></span></label>
            <input type="number" id="max_age_hours" placeholder="–ù–∞–ø—Ä: 24">
        </div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.text = "–°–û–•–†–ê–ù–ò–¢–¨ –ù–ê –ü–ö";
        tg.MainButton.show();

        // –ê–≤—Ç–æ-–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const config = {
                'check_interval': 'tag_check',
                'post_interval': 'tag_pause',
                'posts_per_check': 'tag_posts',
                'max_age_hours': 'tag_age'
            };

            for (let id in config) {
                let val = params.get(id);
                if (val) {
                    document.getElementById(id).value = val;
                    document.getElementById(config[id]).innerText = "–°–µ–π—á–∞—Å: " + val;
                }
            }
        };

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç—É
        tg.MainButton.onClick(function() {
            const data = {
                check_interval: document.getElementById('check_interval').value,
                post_interval: document.getElementById('post_interval').value,
                posts_per_check: document.getElementById('posts_per_check').value,
                max_age_hours: document.getElementById('max_age_hours').value
            };
            tg.sendData(JSON.stringify(data));
        });
    </script>
</body>
</html>
